<%= render 'shared/user_icon', css_class:"bi d-block mx-auto mb-4 rounded-circle" %>

<%= form_with model: @user, url: signup_path do |user_form| %>

  <%= user_form.fields_for :person do |person_form| %>

	  <%= tag.div class: "d-flex flex-wrap" do %>
		
			<%= tag.div class: "flex-fill me-2 mb-3" do %>
			
        <%= render 'form_field', form: person_form, 
 			                          field: {sym: :first_name, str: "First name*", type: :text_field},
 											       required: true, 
 													  autofocus: true  %>

			<% end %>
			
			<%= tag.div class: "flex-fill me-2 mb-3" do %>
			
        <%= render 'form_field', form: person_form, 
 			                          field: {sym: :last_name, str: "Last name*", type: :text_field},
 											       required: true,
 													  autofocus: false  %>

			<% end %>
			
		<% end %>


	  <%= tag.div class: "d-flex flex-wrap" do %>
		
			<%= tag.div class: "flex-fill me-2 mb-3" do %>
			
	        <%= render 'form_field', form: user_form, 
	 			                          field: {sym: :username, str: "Username*", type: :text_field},
	 											       required: true,
	 													  autofocus: false  %>
	
			<% end %>

			<%= person_form.fields_for :email_addresses do |email_form| %>
			
			  <% str, required = email_form.object.eql?(@user.person.email_addresses.first) ? ["Email Address*", true] : ["Email Address", false] %>
			
				<%= tag.div class: "flex-fill me-2 mb-3" do %>
				
		      <%= render 'form_field', form: email_form, 
				                          field: {sym: :address, str: str, type: :email_field},
												       required: required,
														  autofocus: false  %>

				<% end %>
				
			<% end %>

		<% end %>
			
  <% end %> <!-- end of: user_form.fields_for :person ... -->
	

  <%= tag.div class: "d-flex flex-wrap" do %>
		
		<%= tag.div class: "flex-fill me-2 mb-3" do %>
		
      <%= render 'form_field', form: user_form, 
		                          field: {sym: :password, str: "Password*", type: :password_field},
										       required: true,
												  autofocus: false  %>
			
		<% end %>
		
		<%= tag.div class: "flex-fill me-2 mb-3" do %>
		
      <%= render 'form_field', form: user_form, 
		                          field: {sym: :password_confirmation, str: "Confirmation*", type: :password_field},
										       required: true,
												  autofocus: false  %>
	
		<% end %>
		
	<% end %>
			
  <%= tag.div class: "actions center py-3" do %>
		<%= user_form.submit "Sign up", class: "btn btn-primary w-100"  %>
	<% end %>	

			
<% end %>
